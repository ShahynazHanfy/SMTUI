<!-- <div class="container-fluid">
    <div class="table-responsive container">
        <div class="table-wrapper">
            <div class="table-title">
                <div class="row">
                    <div class="col-sm-5">
                        <h2>Project <b>Management</b></h2>
                    </div>
                    <div class="col-sm-7">
                        <a class="btn btn-secondary" style="background-color: rgb(180, 187, 83);"
                            (click)="showTheFirstStepDialog=true"><i class="material-icons">&#xE147;</i> <span>Add New
                                Project</span></a>

                    </div>
                </div>
            </div>
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>ProjectName</th>
                        <th>Rank</th>
                        <th>Date Created</th>
                        <th>Project Status</th>
                        <th>Contractor</th>
                        <th>End User</th>
                        <th>Project Component</th>
                        <th>Governorate Name</th>
                        <th>Operations</th>
                    </tr>
                </thead>
                <tbody *ngFor="let i of projectList">
                    <tr>
                        <td>{{i.projectName}}</td>
                        <td>{{i.rank}}</td>
                        <td>{{i.projectCreationDate | date:'short'}}</td>
                        <td>{{i.projectStatusName}}</td>
                        <td>{{i.contractorContactName}}</td>
                        <td>{{i.endUserContactName}}</td>
                        <td>{{i.projectComponentName}}</td>
                        <td>{{i.governorateName}}</td>
                        <td><button class="btn btn-success" [routerLink]="['projectUpdate',i.id]">Add
                                Update</button></td>
                    </tr>
                </tbody>
            </table>
            <div class="clearfix">
                <div class="hint-text">Showing <b>5</b> out of <b>25</b> entries</div>
                <ul class="pagination">
                    <li class="page-item disabled"><a href="#">Previous</a></li>
                    <li class="page-item"><a href="#" class="page-link">1</a></li>
                    <li class="page-item"><a href="#" class="page-link">2</a></li>
                    <li class="page-item active"><a href="#" class="page-link">3</a></li>
                    <li class="page-item"><a href="#" class="page-link">4</a></li>
                    <li class="page-item"><a href="#" class="page-link">5</a></li>
                    <li class="page-item"><a href="#" class="page-link">Next</a></li>
                </ul>
            </div>
        </div>
    </div>
   
</div> -->
 <p-dialog [(visible)]="showTheFirstStepDialog"  [style]="{width: '80vw'}"
        [contentStyle]="{minHeight: '470px'}" [resizable]="true" [baseZIndex]="10000">
        <p-toast position="top-left" key="tl"></p-toast>
        <p-toast position="top-center" key="tc"></p-toast>
        <p-toast position="bottom-center" key="bc"></p-toast>
        <div class="row">
            <h1 class="col-4" style="font-size: 40px;">Create Project</h1><span class="col-8"
                style="color: green;margin-top: 5px;">(NEW)</span>
        </div>

        <!-- Handle Steps Details,Documents,Desc,Confirmation -->
        <p-steps [model]="items" [(activeIndex)]="activeIndex" [readonly]="false"></p-steps>


        <!-- Details Step -->
        <form *ngIf="activeIndex==0">

            <div class="form-row" style="margin-top: 20px;">
                <div class="form-group col-md-6">
                    <label for="inputState">Project Name</label>
                    <input type="text" class="form-control" [ngModelOptions]="{standalone: true}"
                        [(ngModel)]="projectObj.projectName" name="projectName" id="ProjectName"
                        placeholder="Project Name">
                </div>
                <div class="form-group col-md-6">
                    <label for="inputState">Project Components Name</label>
                    <!-- <select id="inputState" [ngModelOptions]="{standalone: true}"
                        [(ngModel)]="projectObj.projectComponentsId" class="form-control">
                        <option *ngFor="let i of lstProjComponent" value="{{i.id}}">
                            {{i.projectComponentName}}</option>
                    </select> -->
                    <br>
                    <p-multiSelect [options]="lstProjComponent" (onChange)="colChanges()"
                        [ngModelOptions]="{standalone: true}" [(ngModel)]="selectedColumns"
                        optionLabel="projectComponentName" selectedItemsLabel="{0} columns selected"
                        [style]="{minWidth: '500px'}" placeholder="Choose Components"></p-multiSelect>
                </div>
                <!-- <div class="form-group col-md-4">
                    <input type="text" class="form-control" [ngModelOptions]="{standalone: true}"
                        [(ngModel)]="projectObj.companyName" name="companyName" id="Company" placeholder="Company Name">
                </div>
                <div class="form-group col-md-4">
                    <input type="text" class="form-control" [ngModelOptions]="{standalone: true}"
                        [(ngModel)]="projectObj.contractorContactName" name="contractorContactName"
                        id="contractorContactName" placeholder="Cont Contact Name">
                </div> -->
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="inputState">End User</label>
                    <select id="inputState" [ngModelOptions]="{standalone: true}" [(ngModel)]="projectObj.endUsersId"
                        class="form-control">
                        <option *ngFor="let i of lstEndUsers" value="{{i.id}}">{{i.contactName}}</option>
                    </select>
                </div>
                <div class="form-group col-md-6">
                    <label for="inputState">Project Contractor Name</label>
                    <select id="inputState" [ngModelOptions]="{standalone: true}" [(ngModel)]="projectObj.contractorsId"
                        class="form-control">
                        <option *ngFor="let i of lstContractors" value="{{i.id}}">{{i.contractorName}}
                        </option>
                    </select>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="inputState">Governorate Name</label>
                    <select id="inputState" [ngModelOptions]="{standalone: true}" [(ngModel)]="projectObj.governorateId"
                        class="form-control">
                        <option *ngFor="let i of lstGovn" value="{{i.id}}">{{i.governorateName}}
                        </option>
                    </select>
                </div>
                <div class="form-group col-md-6">
                    <label for="inputAddress2">Rank</label>
                    <input type="number" min="5" max="100" step=5 [ngModelOptions]="{standalone: true}"
                        [(ngModel)]="projectObj.rank" class="form-control" id="inputAddress2"
                        placeholder="50%, 20%, or 0">
                </div>
            </div>
        </form>

        <!-- Upload Files Step -->
        <div *ngIf="activeIndex == 1" style="margin-top: 30px;">
            <div class="row container">
                <div class="col-6">
                    <div>
                        <div class="p-inputgroup">
                            <!-- <span class="p-inputgroup-addon"><i class="pi pi-user"></i></span> -->
                            <!-- <input type="text" pInputText placeholder="Document Name"
                                [(ngModel)]="docItem.documentName"> -->
                            <div class="form-group col-12" style="padding: 0 0 0 0;">
                                <label for="inputState">Select Document Category</label>
                                <select id="inputState" [ngModelOptions]="{standalone: true}"
                                    [(ngModel)]="docproject.documentsCategoryId" class="form-control">
                                    <option *ngFor="let i of lstDocumentCategory" value="{{i.id}}">
                                        {{i.categoryName}}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="p-col-12">
                        <div class="row" style="margin-top: 30px;">
                            <div class="col">
                                <input type="file" #file placeholder="Choose file" multiple
                                    (change)="uploadFile(file.files)" style="display:none;">
                                <button type="button" class="btn btn-success" style="margin-top: 7px;"
                                    (click)="file.click()">Upload
                                    File</button>
                            </div>
                            <div class="col">
                                <button class="btn btn-info" style="float: right;" (click)="Savedoctolist()">Save To
                                    List</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <br>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Category Name</th>
                                <th>File Name</th>
                            </tr>
                        </thead>
                        <tbody>

                            <tr *ngFor="let i of lstoddocproj">
                                <td>{{i.documentsCategoryName}}</td>
                                <td>
                                    <div class="row">
                                        <div class="col">
                                            {{i.documentFile}}
                                        </div>
                                        <div class="col"><button class="btn btn-danger"
                                                (click)="deleteDocFromList(i)">Delete</button></div>
                                    </div>
                                </td>

                            </tr>

                            <tr *ngIf="lstoddocproj.length == 0">
                                <td colspan="4" style="color: rgb(102, 97, 23);">No Documents found.</td>
                            </tr>

                        </tbody>

                    </table>
                </div>
            </div>
        </div>

        <!-- Description Step -->
        <div *ngIf="activeIndex == 2" style="margin-top: 20px;">
            <section> <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 130.2 130.2">
                    <circle class="path circle" fill="none" stroke="#73AF55" stroke-width="6" stroke-miterlimit="10"
                        cx="65.1" cy="65.1" r="62.1" />
                    <polyline class="path check" fill="none" stroke="#73AF55" stroke-width="6" stroke-linecap="round"
                        stroke-miterlimit="10" points="100.2,40.2 51.5,88.8 29.8,67.5 " />
                </svg>
                <p class="success">Order placed successfully. Your order will be dispacted soon. meanwhile you can track
                    your order in my order section.</p>
            </section>
            <h4>Please Fill a detaild description </h4>
            <textarea id="description" [(ngModel)]="ProjectDescriptionObj.description"
                placeholder="Add any extra data if you want" pInputTextarea rows="10" cols="120"></textarea>
            <br>
        </div>

        <!-- Button Package Finish Next Back -->
        <div style="margin-top: 50px;">
            <button type="submit" (click)="PreviousStep()" style="margin: 10px;" class="btn btn-warning"
                *ngIf="activeIndex!=0">BACK</button>
            <button type="submit" (click)="AddProject()" style="float: right;margin: 10px;" class="btn btn-primary"
                *ngIf="activeIndex ==2">FINISH</button>

            <!-- <button type="submit" (click)="AddProject()" style="float: right;margin: 10px;" class="btn btn-primary"
               >FINISH</button> -->

            <button type="submit" (click)="NextStep()" style="margin: 10px;float: right;" class="btn btn-success"
                *ngIf="activeIndex!=3">NEXT</button>
        </div>

    </p-dialog>

<div class="card">
    <p-table #dt2 [value]="projectList" dataKey="id" [rows]="10" [showCurrentPageReport]="true"
        [rowsPerPageOptions]="[10,25,50]" [loading]="loading" styleClass="p-datatable-customers container-fluid"
        [paginator]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
        [globalFilterFields]="['ProjectName','Date Created','Rank','status']">
        <ng-template pTemplate="caption">
            <div class="p-d-flex">
                <span class="p-input-icon-left p-ml-auto">
                    <i class="pi pi-search"></i>
                    <input pInputText type="text" (input)="dt2.filterGlobal($event.target.value, 'contains')"
                        placeholder="Search keyword" />

                        <button class="btn btn-primary" style="margin-left: 20px;" (click)="showTheFirstStepDialog=true">Add New
                            Project</button>
                        <!-- <a class="btn btn-secondary" style="background-color: rgb(180, 187, 83);"
                        ><i class="material-icons">&#xE147;</i> <span>Add New
                            Project</span></a> -->


                </span>
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th>Employee</th>
                <th>Name</th>
                <th>Date</th>
                <!-- <th>EndUser</th>
                <th>Company</th> -->
                <th>Rank</th>
                <th>Status</th>
                <th style="width: 7rem">UPDATE</th>
            </tr>
            <tr>
                <th></th>
                <th>Name
                    <p-columnFilter type="text" field="projectName" display="menu"></p-columnFilter>
                </th>
                <th>
                    <div class="p-d-flex p-jc-between p-ai-center">
                        Date
                        <p-columnFilter type="date" field="projectCreationDate" display="menu"></p-columnFilter>
                    </div>                </th>
                <!-- 
                    hna higeeb kol elusers w 3shan tzhar f dropdown list
                 -->
                <!-- <th>
                    <p-columnFilter field="EndUserContactName" matchMode="in" [showMenu]="false">
                        <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                            <p-multiSelect [options]="representatives" placeholder="Any" (onChange)="filter($event.value)" optionLabel="endUserContactName">
                                <ng-template let-option pTemplate="item">
                                    <div class="p-multiselect-representative-option">
                                        <img [alt]="option.label" src="assets/showcase/images/demo/avatar/{{option.image}}" width="32" style="vertical-align: middle" />
                                        <span class="p-ml-1">{{option.name}}</span>
                                    </div>
                                </ng-template>
                            </p-multiSelect>
                        </ng-template>
                    </p-columnFilter>
                </th> -->

                <th>
                    <div class="p-d-flex p-jc-between p-ai-center">
                        Activity
                        <p-columnFilter field="rank" matchMode="between" display="menu" [showMatchModes]="false"
                            [showOperator]="false" [showAddButton]="false">
                            <ng-template pTemplate="filter" let-filter="filterCallback">
                                <p-slider [ngModel]="activityValues" [range]="true" (onSlideEnd)="filter($event.values)"
                                    styleClass="p-m-3"></p-slider>
                                <div class="p-d-flex p-ai-center p-jc-between p-px-2">
                                    <span>{{activityValues[0]}}</span>
                                    <span style="float: right;">{{activityValues[1]}}</span>
                                </div>
                            </ng-template>
                        </p-columnFilter>
                    </div>
                </th>
                <th>Status
                    <p-columnFilter type="text" field="projectStatusName" display="menu"></p-columnFilter>
                </th>
                <th></th>


            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-customer>

            <!-- <td>{{i.projectName}}</td>
            <td>{{i.rank}}</td>
            <td>{{i.projectCreationDate | date:'short'}}</td>
            <td>{{i.projectStatusName}}</td>
            <td>{{i.contractorContactName}}</td>
            <td>{{i.endUserContactName}}</td>
            <td>{{i.projectComponentName}}</td>
            <td>{{i.governorateName}}</td> -->

            <tr>
                <td>
                    <img src="../../../../assets/img/sales.png" style="border-radius: 50%;margin-right: 10px;"
                    [class]="'flag flag-' + customer.endUserContactName" width="40">
                </td>
                <td>
                    <span style="font-weight: bold;">{{customer.projectName}}</span>
                </td>
                <td>{{customer.projectCreationDate | date: 'MM/dd/yyyy'}}</td>
              
                    <!-- <img src="assets/showcase/images/demo/flag/flag_placeholder.png" [class]="'flag flag-' + customer.country.code" width="30">
                    <span class="image-text">{{customer.country.name}}</span> -->
                    <!-- <img src="../../../../assets/img/mike.jpg" style="border-radius: 50%;margin-right: 10px;"
                        [class]="'flag flag-' + customer.endUserContactName" width="30"> -->
                   <!-- <td>   <span class="image-text">{{customer.endUserContactName}}</span>
                </td> -->
                <!-- <td>
                    {{customer.contractorName}}
                </td> -->
                <td>
                    <!-- <img src="../../../../assets/img/bg5.jpg" width="32" style="vertical-align: middle" /> -->
                    <!-- <span class="image-text">{{customer.rank}}</span> -->
                    <!-- <p-progressBar [value]=customer.rank></p-progressBar> -->
                    <p-progressBar [value]="customer.rank" [showValue]="true"></p-progressBar>

                </td>
                <td *ngIf="customer.projectStatusName =='New'">
                    <div style="background-color: #d8cdff;width: 90px;padding-bottom: 5px;text-align: center;border-radius: 5px;">
                        <span
                            style="font-weight: bold;color: #8c17da;text-transform: uppercase; font-size: 12px;letter-spacing: .3px;font-weight: 700;padding: .25em .5rem;border-radius: 2px;"
                            [class]="'customer-badge status-' + customer.projectStatusName">{{customer.projectStatusName}}</span>

                    </div>

                </td>
                <td *ngIf="customer.projectStatusName=='Offered'">
                    <div style="background-color: #ffcdd2;width: 90px;padding-bottom: 5px;text-align: center;border-radius: 5px;">
                        <span [class]="'customer-badge status-' + customer.projectStatusName"
                            style="font-weight: bold; color: #f14b09;text-transform: uppercase; font-size: 12px;letter-spacing: .3px;font-weight: 700;font-weight: 700;padding: .25em .5rem;border-radius: 2px;">{{customer.projectStatusName}}</span>

                    </div>


                </td>
                <td *ngIf="customer.projectStatusName=='Hold'">
                    <div style="background-color: #c8e6c9;width: 90px;padding-bottom: 5px;text-align: center;border-radius: 5px;">
                        <span
                            style="font-weight: bold; text-transform: uppercase; color: #256029; font-size: 12px;letter-spacing: .3px;font-weight: 700;font-weight: 700;padding: .25em .5rem;border-radius: 2px;"
                            [class]="'customer-badge status-' + customer.projectStatusName">{{customer.projectStatusName}}</span>

                    </div>

                </td>
                <td>            
                    <i class="pi" style="font-size: small;">

                        <button class="btn btn-success" [routerLink]="['projectUpdate',customer.id]">
                            Update</button>
                    </i>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="5">No customers found.</td>
            </tr>
        </ng-template>
    </p-table>
</div>